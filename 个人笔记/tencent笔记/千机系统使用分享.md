# 无极系统使用分享

​	无极证券配置平台我们主要分为两个模块，即数据配置和应用管理两部分。

1、数据配置部分可以理解为一个GUI可视化数据库，里面以项目为目录，搭建并维护了许许多多的数据表，应用会通过调用接口的形式获取对象数组形式的数据表数据，提供给项目使用；

2、应用管理部分负责创建和管理一系列运营管理平台子系统，每个子系统都是独立的项目，由一个个子页面搭建而成，页面中的所有元素都是通过可视化组件堆积而成，子系统通过发布后才真正用于实现渠道号、推广投放任务计划的管理等业务需要；



## 1、基础入门

当接收到无极的开发修改需求时，基本上手顺序如下：

### （1）数据准备

#### 1.1、创建数据表

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402281500731.png" alt="image-20240228145958309" style="zoom: 50%;" />

首先确定数据源是否存在，即判断当前需求涉及到的数据表是否已经被创建：

- 如果已经被创建，就找到对应的表，确定表名、查看内容及字段信息；
- 如果没有被创建，那么根据需求的内容和应用场景在对应的项目、分组下创建新的数据表（在确定无误的情况下还可以创建新的项目门类和分组）

点击新建表会跳转至新建表页面，展示如下：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402281849913.png" alt="image-20240228184904941" style="zoom: 33%;" />



#### 1.2、设计表字段

在新建表页面中，底部字段定义部分可以对表结构进行设计

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402281924864.png" alt="image-20240228192412213" style="zoom:50%;" />

每添加一个字段就相当于给表增加了一列属性：

1. ID字段，每张表都**必须有一个ID字段**，如果没有主动指定，系统会添加一个默认ID属性作为主键，平台支持的可选择主键ID有三种：

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282108799.png" alt="image-20240228210856480" style="zoom:50%;" />

   1. 自增ID，类型为数字，每添加一条数据会自动添加1；
   2. 自定义ID，可以手动指定的值；
   3. 随机ID，系统生成的唯一随机数；

2. 普通字段，业务中需要用到的数据字段，如名称、创建人、修改时间等。字段类型涵盖文本、数字、时间戳以及布尔值等类型

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282112100.png" alt="image-20240228211249096" style="zoom: 33%;" />

   需要注意的是字段类型本质上是存储值类型的映射，即对当前属性存在表中的值的一种类型约束。同时字段在创建时还可以规定字段长度、初始值、是否必填、是否唯一等等，因此需要充分考虑再做设计创建；

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282119476.png" alt="image-20240228211908393" style="zoom: 33%;" />



#### 1.3、填充数据

​	完成表的创建和字段设计后，我们就得到了一张全新的数据表。

- 可以从左侧菜单中找到创建好的表，然后点击新增一行进行内容填充；
- 也可以管理数据表中的数据，进行复制、删除等操作；
- 同时还可以直接点击查看接口，直接调用平台提供的接口，访问表中的数据；

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282129193.png" alt="image-20240228212950412" style="zoom:50%;" />



### （2）页面搭建

应用管理各子系统由大量页面组成，这些页面都是通过无极平台使用低代码配置的方式搭建的。

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282205428.png" alt="image-20240228220238965" style="zoom: 33%;" />

搭建的过程可以概述为以下三步

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282253562.png" alt="image-20240228225346464" style="zoom:50%;" />

其中，最常用的页面搭建方式分为两种：

#### 2.1、拖拽搭建

##### （1）拖拽基础

点击页面列表信息，会自动跳转至页面编辑页，工作台布局如下所示：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282209522.png" alt="image-20231127171703794" style="zoom: 40%;" />

下面以按钮组件举例

1. 从左侧菜单通用组件tab中拖拽组件进入画布

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202311271813048.png" alt="image-20231127181258338" style="zoom:50%;" />

2. 右侧菜单属性TAB管理着组件的基本信息（文本内容、图标、对齐方式等）

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202311271815901.png" alt="image-20231127181523909" style="zoom:50%;" />

3. 右侧菜单样式TAB修改组件样式（尺寸、背景、边框等）

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202311272000049.png" alt="image-20231127200046789" style="zoom:50%;" />

4. 右侧菜单行为TAB控制组件的交互事件及行为步骤

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282241680.png" alt="image-20240228224107860" style="zoom: 33%;" />

5. 如果对组件使用不熟悉，还可以点击右侧菜单顶部的指南查看文档

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202311272010088.png" alt="image-20231127200957563" style="zoom:50%;" />

6. 在顶部菜单可以执行预览、保存、发布上线等操作

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202311272028817.png" alt="image-20231127202801977" style="zoom:50%;" />

##### （2）绑定数据

​	此时页面虽然有各种各样的组件，但是组件的数据都是写死的，页面只是一个静态页面，结合前面提到的数据表，我们将其引入进来从而实现页面的动态效果。

​	左侧菜单数据源TAB管理着当前页面用到的所有数据信息

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282316074.png" alt="image-20240228231610226" style="zoom:50%;" />

​	对照解释关系如下图：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282345405.png" alt="image-20240228234515657" style="zoom:50%;" />

具体到组件上，常见的如输入框双向绑定或文本展示，首先点击组件，在属性中找到绑定值属性，点击右侧“绑定到value”在弹窗中找到要绑定的目标值，从而建立绑定关系。

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282349505.png" alt="image-20240228234939222" style="zoom:50%;" />

##### （3）绑定事件

​	为了进一步实现页面的动态效果，就要添加一些列事件，如监听按钮点击触发、输入框失去获取焦点、输入回车等，就要引入事件这一概念。

以按钮组件为例，点击行为设置点击事件

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282353463.png" alt="image-20240228235314169" style="zoom:50%;" />

接着在流程编辑器中可以按照行为步骤设置提交审批、校验表单、跳转页面等各种交互操作，从而实现各种丰富的逻辑功能。

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402282352812.png" alt="image-20240228235210816" style="zoom: 33%;" />



#### 2.2、数据生成

##### （1）准备数据

1. 首先点击添加数据源，打开添加数据源弹窗

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290054721.png" alt="image-20240229005442316" style="zoom:50%;" />

2. 新建数据源，此处以DB数据表为例，选择用来初始化数据源数据表

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290055824.png" alt="image-20240229005543773" style="zoom: 33%;" />

3. 进入新建数据源页面，此处可以修改数据源名称、不同环境的数据表、以及调试更新、删除、查询列表接口

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290058542.png" alt="image-20240229005819932" style="zoom: 33%;" />

4. 确认无误后保存绑定数据源，数据源会显示在数据data列表中

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290100765.png" alt="image-20240229010016819" style="zoom:50%;" />

##### （2）生成视图

鼠标悬浮至添加好的数据源上，按需选择模型，然后一键拖拽至画布上，生成页面组件视图

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290102923.png" alt="image-20240229010214913" style="zoom:50%;" />

##### （3）绑定数据

使用数据自动生成的视图，数据已进行默认绑定，可按照所需进行修改

##### （4）绑定事件

使用数据自动生成的视图，查询、保存、复制等默认按钮事件已绑定，可按照所需进行修改



## 2、要点拓展

### （1）插值表达式/JS表达式

在配置页面的过程中，有两种常见的输入框用于展示变量数据

#### 1.1、插值表达式

特征为黄色的左边框，插值表达式的{{ }}中可以编写JS代码，展示变量或实现逻辑

语法：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290113305.png" alt="image-20240229011322840" style="zoom:67%;" />

示例：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290114307.png" alt="image-20240229011410572" style="zoom:50%;" />

#### 1.2、JS表达式

特征为红色的左侧图标，JS表达式可以直接编写JS代码，需要return返回结果

语法：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290116547.png" alt="image-20240229011552520" style="zoom:67%;" />

示例：

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402290116306.png" alt="image-20240229011619369" style="zoom:50%;" />



### （2）环境区分

无极平台给我们提供了环境隔离能力，避免开发环境修改直接影响生产环境，环境的不同最主要体现在**路径上**和**顶部水印上**。

- 开发环境dev
  - 提供给开发者调试使用，在工作台部分彬啊急保存之后，内容就会立即在开发环境中生效，刷新调试即可；
- 测试环境test
  - 提供给测试或者产品人员验收使用，但是需要走发布流程
- 正式环境prod
  - 提供给业务和实际用户使用，需要走发布流程，需谨慎使用

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402291152984.png" alt="image-20240229115248697" style="zoom:50%;" />



### （3）审批流

​	在事件中，我们经常需要提交审批等发起审批流的操作，无极平台提供了这一事件，审批流的管理在应用配置 -> 审批流中。

<img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402291204284.png" alt="image-20240229120432340" style="zoom: 33%;" />

注意点：审批流的审批对象的属性名必须要和数据表中的属性名一致，因为审批通过后数据会同步到数据表中，如果不一致会出现报错的情况。



### （4）分支管理

无极平台支持分支管理，因此开发中建议使用独立的分支开发，开发完成后再合并到master分支上，最后再发布master分支到正式环境





## 3、参考资料

1. 官方文档（无极文档）https://docs.wuji.woa.com/page/doc?id=455b3a918aea7d78

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402271021859.png" alt="image-20240227102055711" style="zoom: 25%;" />

2. 入门视频

   <img src="https://raw.githubusercontent.com/Rainchen0504/picture/master/202402271022672.png" alt="image-20240227102247747" style="zoom:25%;" />



3、iwiki文档指引 https://iwiki.woa.com/p/4009461900