​	浏览器向服务器请求资源的时候，许多静态的资源是长时间不会更改的。重复发送不断从服务器获取不变的静态资源不仅浪费带宽还增加了服务器的压力，影响用户体验。因此使用http缓存就能设置资源缓存，从而减少资源请求、减少响应时间。



#### http缓存

客户端向服务器发送请求时，会根据HTTP响应头的字段加载缓存的资源。

http缓存分为**强缓存**和**协商缓存**。

相同点：无论哪种都是**从客户端本地加载**；

不同点：协商缓存会向服务器发送请求，强缓存不会发起请求。



#### 强缓存

1. 发生位置：浏览器客户端
2. 是否发送请求：不请求服务器
3. 使用强缓存策略时，如果缓存资源有效，则直接使用缓存资源
4. 命中后返回状态码是 200
5. 强缓存需要配置响应头中的`Cache-Control`属性（http1.1）和`Expires`属性（http1.0）

`Cache-Control`属性值：

```js
1.public：资源可以被任意对象缓存（客户端、代理服务器等）
2.private：资源只能在客户端缓存
3.max-age=xx：设置资源缓存的有效期，超时会发起请求（单位秒）
4.no-cache：设置了该字段需要先和服务端确认返回的资源是否发生了变化，如果资源未发生变化，则直接使用缓存好的资源(走协商缓存)；
5.no-store：禁止任何缓存，每次都会向服务端发起新的请求，拉取最新的资源
```



#### 协商缓存

1. 发生位置：服务器端
2. 是否发送请求：会请求服务器
3. 使用协商缓存策略时，会先向服务器发送一个请求，如果资源没有发生修改，则返回一个304状态，让浏览器使用本地的缓存副本。如果资源发生了修改，则返回修改后的资源
4. 命中后返回的状态码是304
5. 强缓存需要配置响应头中的`Etag`属性和`Last-Modified`属性



`Etag`的值是根据资源内容编码生成的一段字符串（资源标识），内容不同就会生成不同的`Etag`。再次发送请求时请求头会带有`if-none-match`字段，值为上一次响应的`Etag`。服务器会将请求的资源生成资源标识与发送过来的值进行比较，相同就返回304，浏览器直接从本地加载该资源。





注意⚠️：如果不想命中协商缓存和强缓存，win系统使用`ctrl + F5`或`ctrl + shift + r`





#### 浏览器缓存

浏览器缓存分为：内存缓存和硬盘缓存

一般操作频繁的文件都缓存在内存中，加载非常迅速，操作不频繁的会缓存在硬盘中，加载速度较慢。具体存储位置取决于一定的算法机制。

